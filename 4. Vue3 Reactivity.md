
### 1. How can we save the total calculation?

```js

let prict = 5;
let quantity = 2;
let total = price * quantitiy;

console.log(`total is ${total}`); // total is 10

price = 20;

console.log(`totla is ${total}`); // totla is 10

```

```js

let price = 5;
let quantity = 2;
let total = 0;

let dep = new Set(); // to store our effects

let effect = () => {total = price * quantity};

function track() {dep.add(effect)};
function trigger() {dep.forEach(effect => effect())};

track();
effect();



```

- Often our objects will have multiple properties and each property will need their own dep.

dep: dependency which is a set of effects that should get re run when values change
depsMap: A map where we store the dependency object for each property
- KEY: Reactive objects' propertyname(quantity, price...)
- VALUE: effect to re-run () => {total = product.price * product.quantity};

```js

const depsMap = new Map();

function track(key) {
	let dep = depsMap.get(key);
	if(!dep){
		depsMap.set(key, (dep = new Set()));
	}

	dep.add(effect);
}

function trigger(key) {
	let dep = depsMap.get(key);
	if (dep) {
		dep.forEach(effect => {
			effect();
		})
	}
}

let product = {price: 5, quantity: 2};
let total = 0;

let effect = () => {
	total = product.price * product.quantity;
}

track('quantity');
effect();

total // 10
product.quantity = 3 // 3
trigger('quantity') // undefined
total // 15

```